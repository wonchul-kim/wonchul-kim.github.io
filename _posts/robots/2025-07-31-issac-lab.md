---
layout: post
title: Isaac Lab
category: Robots
tag: [isaac]
---

# [IssacLab](https://github.com/isaac-sim/IsaacLab)


* `ros2`와 통신할 필요없이, `isaac`이 설치된 환경에서 `env`를 구성하고 직접적으로 `states`를 받기 때문에 빠르게 학습 가능

    * `--heeadless`로 해야 GPU를 적게 점유하면서 빠르게 학습 가능

* 시뮬레이션에 대한 영상 모니터링을 하고 싶다면, `--video`를 사용하여 저장 가능

* 다중 `env`를 사용할 수 있기 때문에 `mujoco`, `gym`, `RLBench` 등보다 더 빠를듯??

---------------------------------------------------------------------
## Install

**Isaac Sim**을 기반으로 동작하기 때문에 반드시 **Isaac Sim**을 먼저 설치하여야 한다! 아래의 version에 맞게 설치!!!

| Isaac Lab Version             | Isaac Sim Version |
| ----------------------------- | ----------------- |
| `main` branch                 | Isaac Sim 4.5     |
| `v2.1.1`                      | Isaac Sim 4.5     |
| `v2.1.0`                      | Isaac Sim 4.5     |
| `v2.0.2`                      | Isaac Sim 4.5     |
| `v2.0.1`                      | Isaac Sim 4.5     |
| `v2.0.0`                      | Isaac Sim 4.5     |
| `feature/isaacsim_5_0` branch | Isaac Sim 5.0     |

#### Isaac Sim 경로 설정 (컨테이너 내부 경로에 맞게 조정)

```shell
export ISAACSIM_PATH="/isaac-sim"
export ISAACSIM_PYTHON_EXE="${ISAACSIM_PATH}/python.sh"
```

* **Isaac Sim**이 정상 작동하는지 확인

```shell
${ISAACSIM_PYTHON_EXE} -c "print('Isaac Sim configuration is now complete.')"
```

#### Isaac Lab 설치

```shell
git clone https://github.com/isaac-sim/IsaacLab.git
cd IsaacLab

ln -s ${ISAACSIM_PATH} _isaac_sim # Isaac Sim에 대한 심볼릭 링크 생성

apt install cmake build-essential # 필요한 시스템 패키지 설치 (Linux만)

/root/IsaacLab/_isaac_sim/kit/python/bin/python3 -m pip install --upgrade pip # upgrade pip just for in case

./isaaclab.sh --install # Isaac Lab 설치 (모든 RL 프레임워크 포함)
```

#### Test tutorial

* `Franka` 로봇팔 리치 태스크 학습
```shell
./isaaclab.sh -p scripts/reinforcement_learning/rsl_rl/train.py \
    --task Isaac-Reach-Franka-v0 \
    --num_envs 512 \
    --headless
```

* `Ant` 학습
```shell
./isaaclab.sh -p scripts/reinforcement_learning/rl_games/train.py --task Isaac-Ant-v0 --headless
```
------------------------------------------------------------------------------------------------
## Trouble shooting

### 문제: `--headless` 없이 모니터링하면서 실행할 경우, IsaacLab GUI는 동작하지만, 무한 로딩(?)/대기(?) 상태일 경우

* `log` 화인

```shell
vim /isaac-sim/kit/logs/Kit/Isaac-Sim/4.5/kit_xxxxxxxxxxx.log
```

```shell
2025-07-31 06:20:27 [32,392ms] [Info] [omni.usd] [UsdContext] Add Hydra engine 'rtx'
2025-07-31 06:20:27 [32,557ms] [Info] [rtx.scenedb.plugin] [MBVH]: Creating scene acceleration structures for context 0, device mask: 0x3
2025-07-31 06:20:27 [32,580ms] [Info] [omni.usd] [MBVH]: enableHydraengineMasking: OFF, for indexForEngineInstance: 0
2025-07-31 06:20:27 [32,580ms] [Info] [omni.usd] [MBVH]: raytracingMotion/enable: ON, for indexForEngineInstance: 0
2025-07-31 06:20:27 [32,580ms] [Info] [omni.usd] [MBVH]: Forcing hydraengine 0 to have motion raytracing ON
2025-07-31 06:20:32 [38,031ms] [Info] [gpu.foundation.plugin] *** Waiting for RtPso async group async compilation: 5 seconds so far
2025-07-31 06:20:37 [43,031ms] [Info] [gpu.foundation.plugin] *** Waiting for RtPso async group async compilation: 10 seconds so far
2025-07-31 06:20:42 [48,032ms] [Info] [gpu.foundation.plugin] *** Waiting for RtPso async group async compilation: 15 seconds so far
2025-07-31 06:20:47 [53,032ms] [Info] [gpu.foundation.plugin] *** Waiting for RtPso async group async compilation: 20 seconds so far
2025-07-31 06:20:52 [58,032ms] [Info] [gpu.foundation.plugin] *** Waiting for RtPso async group async compilation: 25 seconds so far
2025-07-31 06:20:57 [63,032ms] [Info] [gpu.foundation.plugin] *** Waiting for RtPso async group async compilation: 30 seconds so far
2025-07-31 06:21:02 [68,032ms] [Info] [gpu.foundation.plugin] *** Waiting for RtPso async group async compilation: 35 seconds so far
2025-07-31 06:21:07 [73,032ms] [Info] [gpu.foundation.plugin] *** Waiting for RtPso async group async compilation: 40 seconds so far
```

* 이는 NVIDIA의 GPU 파운데이션 플러그인 내 Ray Tracing 관련 파이프라인 상태 객체(RtPso, Ray Tracing Pipeline State Object)를 GPU에서 비동기로 컴파일하는 과정이 지연되고 있다는 의미

* 즉, Isaac Sim / Isaac Lab이 RTX(레이 트레이싱) 기능 활성화 시 GPU에서 쉐이더 및 파이프라인을 컴파일하는데, 이 과정이 수십 초 이상 지연되면서 실행이 멈추거나 대기 상태에 있는 상황입니다.


#### 해결법: Vulkan 설치 및 버전 확인

```shell
vulkaninfo | head
```

설치되어 있지 않다면, 설치해야한다.

```shell
apt-get update
apt-get install vulkan-tools libvulkan1
```

